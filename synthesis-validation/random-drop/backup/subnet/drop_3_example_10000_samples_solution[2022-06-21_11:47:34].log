q(instance2,instanceid0) :- hasTag(instance0,tag0,instanceid0),hasSubnet(instance1,subnet0,instanceid0),subnet(subnet0,instanceid0),instance2=max(instance0,instance1),hasSubnet(instance0,_,instanceid0),tag(tag0,instanceid0).